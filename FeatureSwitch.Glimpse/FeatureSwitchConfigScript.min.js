(function(n,t,i,r){var u=function(n,t){var u=r.currentMetadata();return i.uriTemplate(u.resources.featureswitch_glimpse_featureswitchresource,{featurename:n,val:t})},e=function(n){n.newData.data.featureswitch={name:"FeatureSwitch Config",data:"",isPermanent:!0};n.newData.metadata.plugins.featureswitch={}},o=function(t){n.ajax({url:u(),type:"GET",contentType:"application/json",success:function(i){f(t.panel,i);t.panel.find(".featureswitch-toggle").change(function(i){var r=i.target.checked;n.ajax({url:u(n(i.target).data("fname"),r),type:"GET",contentType:"application/json",success:function(n){f(t.panel,n)}})})}})},f=function(n,t){var r="",i;if(t.length)for(i=0;i<t.length;i++)r+='<tr class="glimpse-row"><td><input type="checkbox" '+(t[i].enabled?'checked="true"':"")+' data-fname="'+t[i].fullName+'" class="featureswitch-toggle" '+(t[i].canModify?"":'disabled="disabled"')+"/><\/td><td>"+t[i].name+" ("+t[i].fullName+")<\/td><\/tr>";n.html('<table><thead><tr class="glimpse-row-header glimpse-row-header-0"><th>Enabled?<\/th><th>Name<\/th><\/tr><\/thead><tbody class="glimpse-row-holder">'+r+"<\/tbody><\/table>")};t.subscribe("action.panel.rendered.featureswitch",o);t.subscribe("action.data.initial.changed",e)})(jQueryGlimpse,glimpse.pubsub,glimpse.util,glimpse.data);
